# Подготовка репозитория

Для того, чтобы сдавать лабораторные работы по `Xv6`, вам необходимо будет
создавать `Merge Requests` с изменениями. Преподаватель по возможности будет
проводить код-ревью. Когда все правки будут учтены, мы запустим `GitHub
Workflow`, который проведет тестирование вашего решения. Задача будет зачтена,
если пройдены тесты, разрешены замечания преподавателя, а также вы успешно
прошли защиту (ответы на вопросы по теме).

## Создание своего репозитория

Сделайте свой приватный форк данного репозитория. 

```sh
git clone git@github.com:secs-dev/xv6-riscv.git
# или
git clone https://github.com/secs-dev/xv6-riscv.git
```

Приватность форка очень важна. Пожалуйста, не выкладывайте свои решения в
открытый доступ. Не искушайте коллег, дайте им насладиться процессом решения
лабораторных работ самостоятельно и в полной мере. Мы проверим работы на
антиплагиат. В конце семестра, *возможно*, будет проведен семинар c обсуждением и
разбором выполненных ЛР.

## Настройка GitHub Action

Вероятно, в вашем форке не будет работать `GitHub Action` для тестирования
решения. Чтобы это решить соберите и разместите образ `xv6` на `ghcr.io` в
пространстве своего аккаунта.

Сперва нужно будет пройти `GitHub` аутентификацию в `Docker`. Вам может быть
полезно руководство [Working with the Container registry][1].

Для этого, находясь в корне репозитория и заменив `vityaman` на свое имя,
выполните 

```sh
cd ./ci/docker
docker build . -t ghcr.io/vityaman/xv6:latest
docker push ghcr.io/vityaman/xv6:latest
```

После этого создайте ключ доступа к своим пакетам. На портале `GitHub`
перейдите в `Settings/Developer Settings/Personal access tokens/Tokens
(classic)`, создайте ключ с привилегией `read:packages`.

В своем форке перейдите по пути `Settings/Secrets/Actions`, создайте секрет с
именем `VITYAMAN_PACKAGE_READ` и значением, полученным на предыдущем этапе.

Теперь `GitHub Action` должен работать.

## Поддержка

Держите ветку `main` чистой, переодически подтягивайте изменения из основного
репозитория. Лабораторные работы выполняйте в ветках с названием вида `lab-N`,
где `N` - номер лабораторной работы. Постарайтесь не делать лишних изменений,
чтобы иметь читаемый diff в ваших MR.

[1]: https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry
